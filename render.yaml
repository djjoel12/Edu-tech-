services:
  - type: web
    name: chapticket
    env: node
    region: ohio
    plan: free
    rootDir: .
    buildCommand: |
      echo "=== DÃ‰BUT DU BUILD ==="
      echo "ğŸ“ Contenu du dossier racine:"
      ls -la
      echo "ğŸ“ Contenu du dossier client:"
      ls -la client/
      echo "ğŸ“ Contenu du dossier server:"
      ls -la server/
      echo "ğŸ“¦ Installation des dÃ©pendances client..."
      cd client && npm install
      echo "ğŸ—ï¸ Build de l'app React..."
      CI=false npm run build
      echo "ğŸ“¦ Installation des dÃ©pendances server..."
      cd ../server && npm install
      echo "âœ… BUILD RÃ‰USSI ==="
    startCommand: |
      echo "=== DÃ‰MARRAGE ==="
      echo "ğŸ“ Dossier courant:"
      pwd
      ls -la
      echo "ğŸš€ Lancement du server..."
      cd server && npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3001